# MiniC Compiler

The **MiniC Compiler** is a project that involves developing a compiler for a subset of the C programming language, known as MiniC. This compiler will transform MiniC code into LLVM intermediate representation (IR), enabling the generation of executable binaries. The MiniC subset excludes certain language features, such as arrays, structs, pointers, and specific low-level operators.

## Project Overview

The primary objectives of the project are to:

- Build a compiler for the MiniC language subset.
- Utilize C++ programming language for implementing the compiler.
- Incorporate the LLVM compiler framework for generating LLVM IR.
- Generate executable binaries from LLVM IR and evaluate them on an X86 target machine.

## Features

The MiniC Compiler supports the following language features:

- Basic data types: bool, int, and float.
- Variable and function declarations.
- Function parameters and return types.
- Expressions, encompassing arithmetic, logical, and comparison operations.
- Control flow constructs: if statements and while loops.
- Return statements.

## Part 1 - Parser and AST

Part 1 of the project involved:

1. Implementing a lexer that transforms character streams into streams of tokens. The recognized tokens, along with their corresponding lexemes and tokens, are provided in Table 1 of the project guidelines.
2. Develop a parser that constructs an Abstract Syntax Tree (AST) from the token stream generated by the lexer.
3. Utilizing the provided `mccomp.cpp` file, which offers an example lexer implementation. You can compile and execute it using `clang++`. The Makefile provided in the project files can help you compile the lexer and run it on MiniC code.

### Getting Started

To compile and run the MiniC Compiler lexer, follow these steps:

1. Install LLVM version 15.0.0 and add `clang++` to your PATH.
2. Clone the MiniC Compiler repository.

```bash
git clone [repository_url]
```

3. Navigate to the MiniC Compiler directory.

```bash
cd minic-compiler
```

4. Compile the lexer using clang++ and the provided Makefile.

```bash
make
```

5. Run the lexer on MiniC code.

```bash
./mccomp user_code.c
```

### Usage

To compile MiniC code using the MiniC Compiler, execute the following command:

```bash
./minic_compiler input_file.mc -o output_executable
```

Replace `input_file.mc` with your MiniC code file and `output_executable` with the desired name for the output executable.

### Parse Tree Output

The MiniC Compiler outputs the generated parse tree for the MiniC program to the console during the compilation process. This parse tree provides a hierarchical representation of the program's structure, illustrating how different language constructs are nested.

## Part 2 - Types, Scope, and Code Generation

The second part of the project focuses on generating code using the Abstract Syntax Tree (AST) created in Part 1. This part is more challenging as it involves careful handling of various aspects of compiler writing to produce working target code.

### LLVM IR Code Generation

Extend your parser to generate LLVM IR for the AST created after a successful parse. To achieve this, you can add a method called `codegen()` to each AST node class. This method should emit LLVM IR for the corresponding AST node and its children, recursively. Refer to the LLVM tutorial, specifically Chapters 3, 5, and 7, for guidance on generating IR for various language constructs.

Additionally, consider the following hints when generating LLVM IR:

- Utilize the `IRBuilder` class for generating code, including comparisons, loading, storing, and returning values.
- Use the `ConstantInt` and `ConstantFP` classes for representing boolean, integer, and floating-point constants.
- Implement semantic checks for type and scope of variables and functions. Output appropriate errors when these checks are violated.
- Adapt the LLVM functions for generating code for for loops to generate code for while loops as required for MiniC.

### Putting It All Together

This task involves using the generated LLVM IR to build a binary executable and test it on an X86 machine. Each example in the `tests/` directory includes a driver code `driver.cpp` that can be compiled along with the LLVM IR generated by your compiler to obtain an executable. The provided `tests.sh` script can be used to automate testing.

Here's how you can compile, build, and execute an example:

```bash
# Build compiler
make mccomp

# Compile MiniC code using your compiler
./mccomp example.c

# Compile driver code and LLVM IR to build an executable
clang++ driver.cpp output.ll -o example_executable

# Run the executable
./example_executable
```

All the IR code will be generated into a file called output.ll.

## Testing

Test the generated code on all the provided test cases using the `tests.sh` script.

## Limitations

The MiniC Compiler does not support certain language features, including arrays, structs, pointers, and specific low-level operators.

## Resources

- [LLVM Tutorial](https://llvm.org/docs/tutorial/)
- [Git Tutorials](https://git-scm.com/doc)
- [GitHub for Education](https://education.github.com/)
- [GitHub Student Developer Pack](https://education.github.com/pack)
---

Feel free to customize and expand upon this README according to your project's specifics and requirements.
